pipeline {
    agent any

    environment {
        NOME = 'Damiano'
        PROGETTO = 'CI/CD'
    }
    stages {
        stage('Stage 1') {
            steps {
                echo "ðŸ‘‹ Ciao ${NOME}, il progetto Ã¨: ${PROGETTO}"
            }
        }
        stage('Stage 2')  {
            environment {
                NOME = 'SUPER Damiano'
                SOLO_STAGE = 'Variabile solo per stage 2'
            }
            steps {
                echo "LOCAL: ðŸ‘‹ Il mio nome Ã¨: ${NOME}"
                echo "LOCAL: ðŸ‘‹ ${SOLO_STAGE}"
                echo "GLOBAL: ðŸ‘‹ Il mio progetto Ã¨ su: ${PROGETTO}"
            }
        }
        stage('Build') {
            steps { echo 'ðŸ”¨ Compilazione OK' }
        }
        stage('Test') {
            steps { echo 'âœ… Test OK' }
        }
        stage('Notify') {
            steps {
                script {
                    if (env.BRANCH_NAME == 'master') {
                        echo 'ðŸš€ PRODUZIONE'
                    } else {
                        echo 'ðŸ”§ TEST'
                    }
                }
            }
        }
    }
}
