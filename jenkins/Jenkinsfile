pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Compilation ok!'
            }
        }
        stage('Test') {
            steps {
                echo 'Tests ok!'
            }
        }
        stage('Manual Approval') {
            script {
                def approvato = input(
                message: 'Vuoi approvare il deploy?',
                parameters: [
                    choice(name: 'ENV', choices: ['test', 'prod'], description: 'Seleziona l\'ambiente di deploy'),
                ]
            )
                echo "Hai scelto di approvare il deploy nell'ambiente: ${approvato}"
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploy ok!'
            }
        }
    }
}
